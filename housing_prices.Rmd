---
title: 'Data analytics for the Ames Housing Dataset'
output:
  html_document:
    code_folding: hide
    css: style.css
    highlight: tango
    number_sections: true
    theme: yeti
    toc: true
    toc_depth: 2
editor_options:
  chunk_output_type: console
---

```{r setup, message=FALSE, include=FALSE}
knitr::opts_chunk$set(
    echo = TRUE,
    fig.align = 'center',
    comment = NA
)

library(dplyr)
library(DT)
library(ggplot2)
library(tidyr)
```

# Exploratory Data Analysis

## Missing data {.tabset}

### Summary {.unnumbered}

'NA' was replaced by 'null' in cases where it represented a valid value.

  - From the variable descriptions provided in *data_description.txt*, NA is
  a valid value for certain categorical columns. Preprocessing with the
  script *preprocess.R* replaced these NA values by the string 'null' so that
  they would not be treated as missing values.

After this preprocessing, missing values are concentrated in only four
variables

  - LotFrontage: Linear feet of street connected to property
  - GarageYrBlt: Year garage was built
  - MasVnrType: Masonry veneer type
  - MasVnrArea: Masonry veneer area in square feet

### Data {.data-display .unnumbered}

<div style = "width:80%; height:auto; margin: auto;">

```{r}
source('descriptions.R')
read_data <- function(file) {
    data <- read.csv(file, stringsAsFactors = F,
                     colClasses = c(MSSubClass = 'character'))
    return(data)
}
train_data <- read_data('data/train.csv')
test_data <- read_data('data/test.csv')
get_na_counts <- function(data, dataset_name) {
    na_counts <- data.frame(name = colnames(data),
                            count = colSums(is.na(data)),
                            dataset = dataset_name,
                            stringsAsFactors = F) %>%
        arrange(desc(count)) %>%
        filter(count != 0)
    return(na_counts)
}

na_counts_train <- get_na_counts(train_data, 'train')
na_counts_test <- get_na_counts(test_data, 'test')
combined_na_counts <- rbind(na_counts_test, na_counts_train,
                            make.row.names = F) %>%
    arrange(desc(count), desc(dataset), name) %>%
    rename(`missing value count` = count)

# Define option for column alignment to be passed to DT::datatable.
table_alignment <- list(className = 'dt-center', targets = '_all')
datatable(combined_na_counts, rownames = F,
          options = list(columnDefs = list(table_alignment)
))
```

</div>

## Variable distributions {.tabset}

### Summary {.unnumbered}

Display a bar chart for each categorical variable.
Also include the description from 'data_description.txt' for each variable.
